# 사용 메뉴얼

## 1. 개요
ThreadPilot은 요구사항 문서와 Git 변경사항을 바탕으로 프로젝트 상태를 추적하고, PM/운영 관점의 Review Packet(JSON)을 생성하는 로컬 우선 MVP입니다.

## 2. 사전 준비
- Python 3.10+
- (선택) OpenAI API Key (`--live` 모드 사용 시)

## 3. 설치
```bash
python -m venv .venv
.venv\\Scripts\\activate
pip install -r requirements.txt
```

## 4. 요구사항 문서 인제스트
기본 파일명이 `requirements.md`라면:
```bash
python -m threadpilot.main bootstrap --requirements-file requirements.md
```

현재 저장소처럼 다른 파일명(예: `요구사항.md`)이면 경로를 직접 전달하세요:
```bash
python -m threadpilot.main bootstrap --requirements-file 요구사항.md
```

## 5. CLI 사용
Mock 모드(키 없이 실행 가능):
```bash
python -m threadpilot.main review --pr 123
```

Live 모드(실제 LLM 호출):
```bash
set OPENAI_API_KEY=your_key_here
python -m threadpilot.main review --pr 123 --live
```

## 6. API 서버 실행
```bash
uvicorn threadpilot.main:app --reload
```

### API 엔드포인트
- `GET /api/health`
- `POST /api/bootstrap`
- `POST /api/review/{pr_id}?live=false`

`/api/bootstrap` 요청 예시:
```json
{
  "requirements_file": "요구사항.md"
}
```

## 7. 데이터 저장 위치
실행 시 아래 경로에 상태가 저장됩니다.
- `threadpilot/data/project_state.json`
- `threadpilot/data/requirements.json`
- `threadpilot/data/todo_list.md`
- `threadpilot/data/chroma/`

## 8. 빠른 점검
```bash
python -m compileall threadpilot
python -m threadpilot.main review --pr smoke-test
```

정상 동작 시 ReviewPacket JSON이 출력됩니다.
